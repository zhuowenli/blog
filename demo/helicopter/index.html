<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    <body>
    	<div class="demo helicopters">
    		<div class="helicopter">
    			<div class="body">
	    			<div class="propeller">
	    				<span class="pillar"></span>
	    				<span class="bar"></span>
	    			</div>
	    			<div class="spoiler">
	    				<span class="pillar"></span>
	    				<span class="bar"></span>
	    			</div>
    			</div>
    			<div class="foot"></div>
    		</div>
            <div class="house"></div>
    	</div>
    	<script type="text/javascript" src="https://st-qn.gittt.cn/lib/jquery/dist/jquery.min.js"></script>
    	<script type="text/javascript">
    		var helicopter = $('.helicopters'),
                isAction  = false;

            function action(){
                if (!isAction) {
                    isAction = true;
                    helicopter.addClass('action');

                    // 加载队列
                    helicopter
                        .delay(1000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('active');
                            next();
                        })
                        .delay(1000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('one');
                            helicopter.removeClass('action');
                            next();
                        })
                        .delay(1000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('two');
                            helicopter.removeClass('active');
                            next();
                        })
                        .delay(1000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('three');
                            helicopter.removeClass('one');
                            next();
                        })
                        .delay(1000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('four');
                            helicopter.removeClass('two');
                            next();
                        })
                        .delay(1500, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('five');
                            next();
                        })
                        .delay(1500, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('six');
                            helicopter.removeClass('three');
                            helicopter.removeClass('four');
                            next();
                        })
                        .delay(1500, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('seven');
                            helicopter.removeClass('five');
                            helicopter.removeClass('six');
                            next();
                        })
                        .delay(10000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('eight');
                            helicopter.removeClass('seven');
                            next();
                        })
                        .delay(500, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('nine');
                            helicopter.removeClass('eight');
                            next();
                        })
                        .delay(2000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('ten');
                            helicopter.removeClass('nine');
                            next();
                        })
                        .delay(2500, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('end');
                            helicopter.removeClass('ten');
                            next();
                        })
                        .delay(2000, 'class')
                        .queue('class', function(next){
                            helicopter.addClass('over');
                            helicopter.removeClass('end');
                            next();
                        })
                        .delay(3000, 'class')
                        .queue('class', function(){
                            helicopter.removeClass('over');
                            isAction  = false;
                        })
                        .dequeue('class');
                };
            }

            action();

            helicopter.bind('click', function(){
                action();
            })
    	</script>
    </body>
</html>